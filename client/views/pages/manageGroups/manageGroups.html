<template name='manageGroups'>

    <div class="row wrapper wrapper-content border-bottom white-bg page-heading">
        <div class="col-md-12">
            <div class="pull-left m-r-md m-t-sm">
                <i class="fa fa-users text-navy mid-icon"></i>
            </div>
            <h2>Manage Groups</h2>
            <span>Add exercises and questions for students enrolled in your groups</span>
        </div>
    </div>

    <div class="wrapper wrapper-content animated fadeInUp">

        <div class="row">
            <div class="col-lg-8">
                <div class="ibox float-e-margins">
                    <div class="ibox-content ibox-heading" style="border-top-width: medium">
                        <a href="{{pathFor route='createGroup'}}" class="btn btn-primary" style="position: absolute; top: 30px; right: 30px">
                            <i class="fa fa-plus"></i> Create new Group
                        </a>
                        <h3><i class="fa fa-user"></i> My Groups</h3>
                        <small><i class="fa fa-time"></i>
                            You have {{this.count}} active groups.
                        </small>
                    </div>
                    <div class="ibox-content" style="background-color: #476480">
                        <br>
                        {{#if this.count}}

                            {{#each this}}
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <h5>{{name}} &nbsp;&nbsp;&nbsp;&nbsp; <i class="fa fa-user"></i> {{participants.length}}</h5>
                                        {{>iboxTools}}
                                    </div>
                                    <div class="ibox-content">
                                        <!--buttons-->
                                        <div class="row">
                                            <div class="col-md-4">
                                                <a href="{{pathFor 'groupView'}}" class="btn btn-outline btn-success btn-block"><i class="fa fa-bar-chart"></i> Go to Dashboard</a>
                                            </div>
                                            <div class="col-md-4">
                                                <a href="{{pathFor 'updateGroup'}}" class="btn btn-outline btn-success btn-block"><i class="fa fa-cog"></i> Settings</a>
                                            </div>
                                            <div class="col-md-4">
                                                <a class="add-exercise-btn btn btn-outline btn-success btn-block"><i class="fa fa-plus"></i> Add Exercise</a>
                                            </div>
                                        </div>

                                        {{#if exercises}}
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Exercises</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {{#each exercises}}
                                                    <tr>
                                                        <td>{{description}}</td>
                                                        <td><a href="{{pathFor 'editExercise' groupId=../_id exerciseId=_id}}" class="pull-right"> Edit <i class="fa fa-pencil"></i></a></td>
                                                    </tr>
                                                {{/each}}
                                            </tbody>
                                        </table>
                                        {{/if}}

                                        {{#if pendingParticipants}}
                                            <table class="table table-hover">
                                                <thead>
                                                <tr>
                                                    <th>Pending Requests</th>
                                                    <th></th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {{#each pendingParticipants}}
                                                    <tr>
                                                        <td>{{getName this}}</td>
                                                        <td>
                                                            <a data-groupid="{{../_id}}" class="reject-btn pull-right btn btn-warning btn-xs"> Reject <i class="fa fa-times"></i></a>
                                                            <a data-groupid="{{../_id}}" class="accept-btn pull-right btn btn-primary btn-xs"> Accept <i class="fa fa-check"></i></a>
                                                        </td>
                                                    </tr>
                                                {{/each}}
                                                </tbody>
                                            </table>
                                        {{/if}}

                                    </div>
                                </div>
                            {{/each}}

                        {{else}}

                            <div class="text-center" style="margin-top: 20px">
                                <i class="fa fa-users" style="font-size: 5em; color:#888888"></i>
                                <h3>You have not created any groups</h3>
                            </div>

                        {{/if}}
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="ibox float-e-margins">
                    <div class="ibox-content">
                        <div class="text-center" style="margin: 50px 0">
                            <i class="fa fa-gears" style="font-size: 5em; color:#888888"></i>
                            <h3>In progress: Activity Stream</h3>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>

</template>